---
title: "Lecture 7: R Markdown and Shiny"
output: slidy_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## R Markdown

This is an R Markdown presentation. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document.

## Slide with Bullets

- Bullet 1
- Bullet 2
- Bullet 3

## Slide with R code chunks

```{r cars, echo = TRUE,eval=FALSE}
summary(cars)
```

- include = FALSE prevents code and results from appearing in the finished file. R Markdown still runs the code in the chunk, and the results can be used by other chunks.
- echo = FALSE prevents code, but not the results from appearing in the finished file. This is a useful way to embed figures.
- message = FALSE prevents messages that are generated by code from appearing in the finished file.
- warning = FALSE prevents warnings that are generated by code from appearing in the finished.
- fig.cap = "..." adds a caption to graphical results.


## Slide with Plot

```{r pressure}
plot(pressure)
```


## Images
```{r}
image(volcano)
```

## inline R code 
- Code results can be inserted directly into the text of a .Rmd file by enclosing the code with `r 1+1 `.

R Markdown will always

- display the results of inline code, but not the code
apply relevant text formatting to the results
-  As a result, inline output is indistinguishable from the surrounding text. Inline expressions do not take knitr options.

## other languages
knitr can execute code in many languages besides R. Some of the available language engines include:

- Python
- SQL
- Bash
- Rcpp
- Stan
- JavaScript
- CSS
To process a code chunk using an alternate language engine, replace the r at the start of your chunk declaration with the name of the language.

## Tables
By default, R Markdown displays data frames and matrixes as they would be in the R terminal (in a monospaced font). If you prefer that data be displayed with additional formatting you can use the knitr::kable function.
Note the use of the results='asis' chunk option. This is required to ensure that the raw table output isn't processed further by knitr.

```{r echo = FALSE, results = 'asis'}
library(knitr)
kable(mtcars[1:5, ], caption = "A knitr kable.")
```


## Basics
Markdown provides an easy way to make standard types of formatted text, like

- *italics*
- **bold**
- `code`
- [links](rmarkdown.rstudio.com)
- etc.

you can also use R Markdown's markdown to make Latex equations, $E = mc^{2}$


## Output Formats
If you do not select a format, R Markdown renders the file to its default format, which you can set in the output field of a .Rmd fileâ€™s header. The header of 1-example.Rmd shows that it renders to an HTML file by default.

The RStudio IDE knit button renders a file to the first format listed in its output field. You can render to additional formats by clicking the dropdown menu beside the knit button.

## Notebooks
R Markdown will create a nb.html version of your file: a self-contained HTML file that contains both a rendered copy of the notebook with all current chunk outputs (suitable for display on a website) and a copy of the notebook .Rmd itself.

You can view the .nb.html file in any ordinary web browser, or open it in RStudio. In this case, RStudio will extract and open the .Rmd file that underlies the nb.html file

## flexdashboard: Easy interactive dashboards for R
You can use flexdashboard to publish groups of related data visualizations as a dashboard. A flexdashboard can either be static (a standard web page) or dynamic (a Shiny interactive document). A wide variety of components can be included in flexdashboard layouts, including:

- Interactive JavaScript data visualizations based on htmlwidgets.

- R graphical output including base, lattice, and grid graphics.

- Tabular data (with optional sorting, filtering, and paging).

- Value boxes for highlighting important summary data.

- Gauges for displaying values on a meter within a specified range.

- Text annotations of various kinds.
- https://rmarkdown.rstudio.com/flexdashboard/index.html


## R Markdown Websites



## htmlwidgets
```{r}
library(leaflet)
m <- leaflet() %>%
  addTiles() %>%  # Add default OpenStreetMap map tiles
  addMarkers(lng=174.768, lat=-36.852, popup="The birthplace of R")
m  # Print the map
```


## HKU
```{r}
library(leaflet)
m <- leaflet() %>%
  addTiles() %>%  # Add default OpenStreetMap map tiles
  addMarkers(lng=114.1360, lat=22.2838, popup="HKU")
m  # Print the map
```

## Shiny
The Shiny package builds interactive web apps powered by R. To call Shiny code from an R Markdown document, add "runtime: shiny" to the header

Use Shiny to run any R code that you like in response to user actions. Since web browsers cannot execute R code, Shiny interactions occur on the server side.

https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/